var j=Object.defineProperty;var E=(t,e,n)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var u=(t,e,n)=>(E(t,typeof e!="symbol"?e+"":e,n),n);import{ct as M,cx as tt,cG as et,ka as nt,kb as at,kc as ot,kd as st,ke as it,cK as lt,kf as rt,kg as ct,kh as ut,aH as y,aI as V,aJ as dt,h as b,ki as pt,kj as P,dh as C,d as A,c as N,eC as mt,r as D,w as $,aK as ft,aL as g,aQ as d,aR as I,aO as O,aM as v,K as G,aS as ht,ae as _t,aY as gt,aZ as vt,b8 as Nt,av as bt}from"./index-7d88c287.js";import{_ as Ct,a as kt,N as wt,M as xt,b as St}from"./SearchableSelect.vue_vue_type_script_setup_true_lang-ed258ae2.js";import{_ as Pt}from"./Input-ffdad1fe.js";import{_ as Dt}from"./InputNumber-abdefede.js";import{N as yt}from"./Select-303f22e9.js";import{N as Lt}from"./Switch-9b885204.js";import{N as Tt}from"./Checkbox-9ba985cc.js";import{N as Mt}from"./Popover-5b10a0f7.js";import{d as S,N as K}from"./time-8155d1fb.js";import{N as It}from"./Tag-f9ad861a.js";import{b as Ot,c as R,t as Bt}from"./get-c991346f.js";import{_ as Ft,a as Vt}from"./Grid-4bf13ce0.js";import{N as At}from"./Space-9d9d608e.js";var B=M?M.isConcatSpreadable:void 0;function $t(t){return tt(t)||et(t)||!!(B&&t&&t[B])}function U(t,e,n,a,o){var i=-1,c=t.length;for(n||(n=$t),o||(o=[]);++i<c;){var h=t[i];e>0&&n(h)?e>1?U(h,e-1,n,a,o):nt(o,h):a||(o[o.length]=h)}return o}function Gt(t){var e=t==null?0:t.length;return e?U(t,1):[]}function Kt(t){return at(ot(t,void 0,Gt),t+"")}function Rt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function Ut(t,e){return e.length<2?t:Ot(t,st(e,0,-1))}function Ht(t,e){return e=R(e,t),t=Ut(t,e),t==null||delete t[Bt(Rt(e))]}function qt(t){return it(t)?void 0:t}var Yt=1,Zt=2,zt=4,Jt=Kt(function(t,e){var n={};if(t==null)return n;var a=!1;e=lt(e,function(i){return i=R(i,t),a||(a=i.length>1),i}),rt(t,ct(t),n),a&&(n=ut(n,Yt|Zt|zt,qt));for(var o=e.length;o--;)Ht(n,e[o]);return n});const F=Jt,Qt={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Wt=dt("path",{fill:"currentColor",d:"M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7H5V5h7V3H5m12.78 1a.69.69 0 0 0-.48.2l-1.22 1.21l2.5 2.5L19.8 6.7c.26-.26.26-.7 0-.95L18.25 4.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L8 13.5V16h2.5l7.37-7.38l-2.5-2.5Z"},null,-1),Xt=[Wt];function jt(t,e){return y(),V("svg",Qt,Xt)}const Et={name:"mdi-square-edit-outline",render:jt};var H=(t=>(t.NInput="on-input",t.NInputNumber="on-update:value",t.NSelect="on-update:value",t.SearchableSelect="onUpdate:value",t.NSwitch="on-update:value",t.NCheckbox="on-update:value",t.NDatePicker="on-update:value",t.NTimePicker="on-update:value",t))(H||{});const f=new Map;f.set("NInput",Pt);f.set("NInputNumber",Dt);f.set("NSelect",yt);f.set("SearchableSelect",Ct);f.set("NSwitch",Lt);f.set("NCheckbox",Tt);f.set("NDatePicker",kt);f.set("NTimePicker",wt);const te=({component:t="NInput",rule:e=!0,ruleMessage:n="",popoverVisible:a=!1},{attrs:o})=>{const i=f.get(t),c=b(i,o);return e?b(Mt,{"display-directive":"show",show:!!a,manual:"manual"},{trigger:()=>c,default:()=>b("span",{style:{color:"red",width:"90px",display:"inline-block"}},{default:()=>n})}):c};class k{constructor(e,n,a){u(this,"data");u(this,"confirmedData");u(this,"props",{});u(this,"valueField","value");u(this,"cmpType","NInput");this.cmpType=n,this.load(e,a)}load(e,n){this.data=e,this.confirmedData=this.data}setConfirm(){this.confirmedData=this.data}getValue(){return this.data}getLabel(){return this.data}getConfirmedValue(){return this.confirmedData}getConfirmedLabel(){return this.confirmedData}}class q extends k{handleChange(e){if(!e){this.data=e;return}if(e!=null&&e.target&&Reflect.has(e.target,"value")){this.data=e.target.value;return}(pt(e)||P(e)||C(e))&&(this.data=e)}}class Y extends k{constructor(n,a,o){super(n,a,o);u(this,"options",[]);u(this,"confirmedOptions",[]);this.load(n,o)}load(n,a){var o;super.load(n,a),((o=a==null?void 0:a.options)==null?void 0:o.length)>0&&(this.options=xt(this.options,a==null?void 0:a.options),this.confirmedOptions=[...this.options])}handleChange(n){if(!n){this.data=n;return}this.data=n.value,this.options=St(this.options,n.option),this.props.options=[n.option??{}]}getLabel(){var n,a;return(a=(n=this.options)==null?void 0:n.find(o=>o.value===this.data))==null?void 0:a.label}getConfirmedLabel(){var n,a;return(a=(n=this.confirmedOptions)==null?void 0:n.find(o=>o.value===this.confirmedData))==null?void 0:a.label}setConfirm(){super.setConfirm(),this.confirmedOptions=[...this.options]}}class ee extends k{constructor(){super(...arguments);u(this,"valueField","checked")}handleChange(n){if(!n){this.data=n;return}this.data=n.target.checked}getValue(){return P(this.data)?this.data:!!this.data}getConfirmedValue(){return P(this.confirmedData)?this.confirmedData:!!this.confirmedData}}class ne extends k{constructor(){super(...arguments);u(this,"valueFormat")}handleChange(n){if(!n){this.data=n;return}this.data=n,C(this.data)&&this.props.valueFormat&&(this.data=S(this.data))}getLabel(){return C(this.data)?S(this.data):this.data}getConfirmedLabel(){return C(this.confirmedData)?S(this.confirmedData):this.confirmedData}}const _=new Map;_.set("NInput",(t,e)=>new q(t,"NInput",e));_.set("NInputNumber",(t,e)=>new q(t,"NInputNumber",e));_.set("NSelect",(t,e)=>new Y(t,"NSelect",e));_.set("SearchableSelect",(t,e)=>new Y(t,"SearchableSelect",e));_.set("NDatePicker",(t,e)=>new ne(t,"NDatePicker",e));_.set("NCheckbox",(t,e)=>new ee(t,"NCheckbox",e));function ae(t,e,n){let a=_.get(e);return a||(a=_.get("NInput")),a(t,n)}const L=new Map;L.set("NText",K);L.set("NTag",It);const oe=({component:t="NText",text:e},{attrs:n})=>{const a=L.get(t);return b(a,n,{default:()=>e})},se=A({__name:"EditModal",props:{visible:{type:Boolean},label:{},data:{},editProps:{default:()=>({})}},emits:["update:visible","submit"],setup(t,{expose:e,emit:n}){const a=t,o=N({get(){return a.visible},set(s){n("update:visible",s)}}),i=()=>{o.value=!1},c=N(()=>a.label),h=mt(),l=D((()=>{var s;return ae(a.data,(s=a.editProps)==null?void 0:s.component,a.editProps??{})})()),x=s=>l.value.handleChange(s),r=N(()=>{const s={...a.editProps??{},...l.value.props??{}},m=l.value.cmpType??null?H[l.value.cmpType]:void 0;return{...F(h,"class","style"),...F(s,"onChange"),[m]:x,[l.value.valueField]:l.value.getValue()}});async function p(){n("submit",l.value,s=>{s||(i(),l.value.setConfirm())})}return $(()=>a.data,s=>{s&&l.value.load(s,a.editProps??{})}),e({component:l}),(s,m)=>{const Z=K,T=Ft,z=Vt,J=_t,Q=At,W=gt;return y(),ft(W,{show:o.value,"onUpdate:show":m[0]||(m[0]=X=>o.value=X),preset:"card",class:"w-700px"},{default:g(()=>[d(z,{cols:4,class:"w-full","y-gap":8},{default:g(()=>[d(T,{span:1},{default:g(()=>[d(Z,null,{default:g(()=>[I(O(c.value+": "),1)]),_:1})]),_:1}),d(T,{span:3},{default:g(()=>[d(v(te),G({"popover-visible":!1,style:{width:"70%"}},r.value),null,16)]),_:1})]),_:1}),d(Q,{class:"w-full pt-16px",size:24,justify:"end"},{default:g(()=>[d(J,{class:"w-72px",type:"primary",onClick:p},{default:g(()=>[I(O(v(ht)("yTravel.common.confirm")),1)]),_:1})]),_:1})]),_:1},8,["show"])}}}),be=A({__name:"index",props:{label:{},data:{},options:{default:()=>[]},showComponentProps:{default:()=>({})},editComponentProps:{default:()=>({})}},emits:["submit"],setup(t,{emit:e}){const n=t,{bool:a,setTrue:o}=vt(),i=D(),c=D(n.data);$(()=>n.data,r=>{r&&(c.value=r)});const h=N(()=>{var r,p;return(p=(r=i.value)==null?void 0:r.component)==null?void 0:p.getConfirmedLabel()}),w=N(()=>n.showComponentProps??{}),l=N(()=>n.editComponentProps??{});function x(r,p){const s=r.getValue();e("submit",s,m=>{m||(c.value=s),p(m)})}return(r,p)=>{const s=Et;return y(),V(bt,null,[d(v(oe),G({component:w.value.component??"NText",text:h.value},w.value,{onClick:v(o)}),null,16,["component","text","onClick"]),d(s,{class:"text-15px ml-20px",onClick:v(o)},null,8,["onClick"]),d(se,{ref_key:"editModal",ref:i,visible:v(a),"onUpdate:visible":p[0]||(p[0]=m=>Nt(a)?a.value=m:null),label:r.label,data:c.value,"edit-props":l.value,onSubmit:x},null,8,["visible","label","data","edit-props"])],64)}}});export{be as _};
