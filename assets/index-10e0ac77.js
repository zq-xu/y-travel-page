import{r as $,c as F,dh as G,d as I,w as H,aH as C,aK as U,aL as i,aQ as e,aR as z,aO as O,aM as a,km as A,aS as n,k8 as B,aI as q,aJ as Z,bm as W,ae as M,aY as L,h as S,aZ as J,b8 as R,av as X,e8 as ee,ba as ae,cY as te,by as le}from"./index-7d88c287.js";import{b as ne,v as P,a as V}from"./vehicle-cfe28117.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang-1d5ac1dd.js";import{a as j,N}from"./time-8155d1fb.js";import{_ as Y,a as E}from"./DescriptionsItem-0ee3ee92.js";import{_ as oe}from"./ListTable.vue_vue_type_script_setup_true_lang-f17df0df.js";import{c as re,u as w,a as ie}from"./rule-00386333.js";import{_ as se}from"./Input-ffdad1fe.js";import{_ as pe}from"./FormItemGridItem-6e368cab.js";import{_ as ce}from"./InputNumber-abdefede.js";import{a as K,_ as ue}from"./Grid-4bf13ce0.js";import{N as Q}from"./Space-9d9d608e.js";import{d as me}from"./handler-eb310ea7.js";import{_ as de,a as _e}from"./Tabs-dd8664ff.js";import"./crud-ca5eec89.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-ed258ae2.js";import"./Suffix-e9302ec1.js";import"./Ellipsis-0f9030da.js";import"./Popover-5b10a0f7.js";import"./get-c991346f.js";import"./format-length-c9d165c6.js";import"./cssr-b4c9f431.js";import"./use-merged-state-25180a9d.js";import"./use-compitable-51841f38.js";import"./next-frame-once-7035a838.js";import"./Select-303f22e9.js";import"./Tag-f9ad861a.js";import"./Forward-1c09c58f.js";import"./Switch-9b885204.js";import"./Checkbox-9ba985cc.js";import"./refresh-a3259f6e.js";import"./use-loading-37c1118f.js";import"./vuedraggable.umd-64e6f377.js";import"./DataTable-895cc5c9.js";import"./Dropdown-7051e15f.js";import"./create-ref-setter-f485918b.js";import"./PerformantEllipsis-328d4c5a.js";import"./Pagination-a07528c5.js";import"./Add-fb180c3e.js";function ve(){const t=$({}),y=F(()=>{var c,_;return G((c=t.value)==null?void 0:c.createdAt)?j((_=t.value)==null?void 0:_.createdAt):""});function T(c){c&&(t.value=JSON.parse(JSON.stringify(c)))}return{baseData:t,createdAt:y,loadData:T}}const fe=I({__name:"index",props:{data:{}},emits:["update"],setup(t,{emit:y}){const T=t,{baseData:c,createdAt:_,loadData:D}=ve();function s(v,p,o){const l={};l[v]=p,y("update",l,o)}return H(()=>T.data,v=>D(v)),(v,p)=>{const o=Y,l=E;return C(),U(l,{columns:6,"label-placement":"left",class:"text-center w-full",bordered:""},{default:i(()=>{var d,f,u,x,m,h;return[e(o,{span:2,label:(d=a(A).find(r=>r.value==="name"))==null?void 0:d.label},{default:i(()=>[z(O(a(c).name),1)]),_:1},8,["label"]),e(o,{span:2,label:(f=a(A).find(r=>r.value==="phone"))==null?void 0:f.label},{default:i(()=>{var r;return[e(k,{label:a(n)("yTravel.property.phone")+": ",data:(r=a(c))==null?void 0:r.phone,"edit-component-props":{},onSubmit:p[0]||(p[0]=(g,b)=>s("phone",g,b))},null,8,["label","data"])]}),_:1},8,["label"]),e(o,{span:2,label:(u=a(A).find(r=>r.value==="address"))==null?void 0:u.label},{default:i(()=>{var r;return[e(k,{label:a(n)("yTravel.property.address")+": ",data:(r=a(c))==null?void 0:r.address,"edit-component-props":{},onSubmit:p[1]||(p[1]=(g,b)=>s("address",g,b))},null,8,["label","data"])]}),_:1},8,["label"]),e(o,{span:6,label:(x=a(A).find(r=>r.value==="invoiceInfo"))==null?void 0:x.label},{default:i(()=>{var r;return[e(k,{label:a(n)("yTravel.property.invoiceInfo")+": ",data:(r=a(c))==null?void 0:r.invoiceInfo,"edit-component-props":{},onSubmit:p[2]||(p[2]=(g,b)=>s("invoiceInfo",g,b))},null,8,["label","data"])]}),_:1},8,["label"]),e(o,{span:4,label:(m=a(B).find(r=>r.value==="comment"))==null?void 0:m.label},{default:i(()=>{var r;return[e(k,{label:a(n)("yTravel.property.comment")+": ",data:(r=a(c))==null?void 0:r.comment,"edit-component-props":{},onSubmit:p[3]||(p[3]=(g,b)=>s("comment",g,b))},null,8,["label","data"])]}),_:1},8,["label"]),e(o,{span:2,label:(h=a(B).find(r=>r.value==="createdAt"))==null?void 0:h.label},{default:i(()=>[z(O(a(_)),1)]),_:1},8,["label"])]}),_:1})}}}),be={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},ye=Z("path",{fill:"currentColor",d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5s1.5.67 1.5 1.5s-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"},null,-1),Te=[ye];function he(t,y){return C(),q("svg",be,Te)}const ge={name:"ic-baseline-directions-car",render:he},De=I({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(t,{emit:y}){const T=t,c=F({get(){return T.visible},set(o){y("update:visible",o)}}),_=()=>{c.value=!1},D=$(),s=W({price:{FullDay:0,HalfDay:0,Transfer:0,Gozo:0,Overtime:0}}),v={name:re(n("yTravel.property.namePlaceholder")),id:w,createdAt:w,updatedAt:w,comment:w,vehicleCompanyId:w,price:w};async function p(){var l,d;await((l=D.value)==null?void 0:l.validate());const{error:o}=await ne.create(s);o||((d=window.$message)==null||d.success(n("yTravel.common.addSuccess")),_(),y("succeed"))}return(o,l)=>{const d=se,f=pe,u=ce,x=K,m=ie,h=M,r=Q,g=L;return C(),U(g,{show:c.value,"onUpdate:show":l[6]||(l[6]=b=>c.value=b),preset:"card",title:a(n)("yTravel.common.add")+" "+a(n)("yTravel.resource.vehicle.tittle"),class:"w-700px"},{default:i(()=>[e(m,{ref_key:"formRef",ref:D,class:"w-80% m-auto","label-placement":"left","label-width":150,model:s,rules:v},{default:i(()=>[e(x,{cols:12,"x-gap":18},{default:i(()=>[e(f,{span:12,label:a(n)("yTravel.property.name"),path:"name"},{default:i(()=>[e(d,{value:s.name,"onUpdate:value":l[0]||(l[0]=b=>s.name=b),autosize:"",class:"min-w-60%",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(f,{span:12,label:a(n)("yTravel.resource.vehicle.fullDay")+" / €"},{default:i(()=>[e(u,{value:s.price.FullDay,"onUpdate:value":l[1]||(l[1]=b=>s.price.FullDay=b)},null,8,["value"])]),_:1},8,["label"]),e(f,{span:12,label:a(n)("yTravel.resource.vehicle.halfDay")+" / €"},{default:i(()=>[e(u,{value:s.price.HalfDay,"onUpdate:value":l[2]||(l[2]=b=>s.price.HalfDay=b)},null,8,["value"])]),_:1},8,["label"]),e(f,{span:12,label:a(n)("yTravel.resource.vehicle.transfer")+" / €"},{default:i(()=>[e(u,{value:s.price.Transfer,"onUpdate:value":l[3]||(l[3]=b=>s.price.Transfer=b)},null,8,["value"])]),_:1},8,["label"]),e(f,{span:12,label:a(n)("yTravel.resource.vehicle.gozo")+" / €"},{default:i(()=>[e(u,{value:s.price.Gozo,"onUpdate:value":l[4]||(l[4]=b=>s.price.Gozo=b)},null,8,["value"])]),_:1},8,["label"]),e(f,{span:12,label:a(n)("yTravel.resource.vehicle.overtime")+" / €"},{default:i(()=>[e(u,{value:s.price.Overtime,"onUpdate:value":l[5]||(l[5]=b=>s.price.Overtime=b)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),e(r,{class:"w-full pt-16px",size:24,justify:"end"},{default:i(()=>[e(h,{class:"w-72px",type:"primary",onClick:p},{default:i(()=>[z(O(a(n)("yTravel.common.confirm")),1)]),_:1})]),_:1})]),_:1},8,["show","title"])}}});function xe(){const t=$({}),y=F(()=>{var c,_;return G((c=t.value)==null?void 0:c.createdAt)?j((_=t.value)==null?void 0:_.createdAt):""});function T(c){c&&(t.value=JSON.parse(JSON.stringify(c)))}return{data:t,createdAt:y,loadData:T}}const Se=I({__name:"index",props:{visible:{type:Boolean},vehicleType:{}},emits:["update:visible","updateSucceed"],setup(t,{emit:y}){const T=t,c=F({get(){return T.visible},set(p){y("update:visible",p)}}),{data:_,createdAt:D,loadData:s}=xe();async function v(p,o,l){const d={};d[p]=o,await me(()=>P.update(_.value.id,d),l)}return H(()=>T.vehicleType,p=>s(p)),(p,o)=>{const l=Y,d=k,f=E,u=L;return C(),U(u,{show:c.value,"onUpdate:show":o[5]||(o[5]=x=>c.value=x),preset:"card",title:a(n)("yTravel.resource.vehicleInquiry.detail.tittle"),class:"w-600px"},{default:i(()=>[e(f,{columns:2,"label-placement":"left",class:"text-center",bordered:""},{default:i(()=>{var x;return[e(l,{span:2,label:a(n)("yTravel.property.name")},{default:i(()=>[z(O(a(_).name),1)]),_:1},8,["label"]),e(l,{span:2,label:a(n)("yTravel.resource.vehicle.fullDay")+" / €"},{default:i(()=>{var m,h;return[e(d,{label:a(n)("yTravel.resource.vehicle.fullDay"),data:(h=(m=a(_))==null?void 0:m.price)==null?void 0:h.FullDay,"edit-component-props":{component:"NInputNumber"},onSubmit:o[0]||(o[0]=(r,g)=>v("fullDay",r,g))},null,8,["label","data"])]}),_:1},8,["label"]),e(l,{span:2,label:a(n)("yTravel.resource.vehicle.halfDay")+" / €"},{default:i(()=>{var m,h;return[e(d,{label:a(n)("yTravel.resource.vehicle.halfDay"),data:(h=(m=a(_))==null?void 0:m.price)==null?void 0:h.HalfDay,"edit-component-props":{component:"NInputNumber"},onSubmit:o[1]||(o[1]=(r,g)=>v("halfDay",r,g))},null,8,["label","data"])]}),_:1},8,["label"]),e(l,{span:2,label:a(n)("yTravel.resource.vehicle.transfer")+" / €"},{default:i(()=>{var m,h;return[e(d,{label:a(n)("yTravel.resource.vehicle.transfer"),data:(h=(m=a(_))==null?void 0:m.price)==null?void 0:h.Transfer,"edit-component-props":{component:"NInputNumber"},onSubmit:o[2]||(o[2]=(r,g)=>v("transfer",r,g))},null,8,["label","data"])]}),_:1},8,["label"]),e(l,{span:2,label:a(n)("yTravel.resource.vehicle.gozo")+" / €"},{default:i(()=>{var m,h;return[e(d,{label:a(n)("yTravel.resource.vehicle.gozo"),data:(h=(m=a(_))==null?void 0:m.price)==null?void 0:h.Gozo,"edit-component-props":{component:"NInputNumber"},onSubmit:o[3]||(o[3]=(r,g)=>v("gozo",r,g))},null,8,["label","data"])]}),_:1},8,["label"]),e(l,{span:2,label:a(n)("yTravel.resource.vehicle.overtime")+" / €"},{default:i(()=>{var m,h;return[e(d,{label:a(n)("yTravel.resource.vehicle.overtime"),data:(h=(m=a(_))==null?void 0:m.price)==null?void 0:h.Overtime,"edit-component-props":{component:"NInputNumber"},onSubmit:o[4]||(o[4]=(r,g)=>v("overtime",r,g))},null,8,["label","data"])]}),_:1},8,["label"]),e(l,{span:2,label:(x=a(B).find(m=>m.value==="createdAt"))==null?void 0:x.label},{default:i(()=>[z(O(a(D)),1)]),_:1},8,["label"])]}),_:1})]),_:1},8,["show","title"])}}});function Ne(){return[{key:"name",title:n("yTravel.property.name"),align:"center",render:t=>S(N,{},{default:()=>t.name})},{key:"FullDay",title:n("yTravel.resource.vehicle.fullDay"),align:"center",render:t=>S(N,{},{default:()=>t.price.FullDay?`€${t.price.FullDay}`:"-"})},{key:"HalfDay",title:n("yTravel.resource.vehicle.halfDay"),align:"center",render:t=>S(N,{},{default:()=>t.price.HalfDay?`€${t.price.HalfDay}`:"-"})},{key:"Transfer",title:n("yTravel.resource.vehicle.transfer"),align:"center",render:t=>S(N,{},{default:()=>t.price.Transfer?`€${t.price.Transfer}`:"-"})},{key:"Gozo",title:n("yTravel.resource.vehicle.gozo"),align:"center",render:t=>S(N,{},{default:()=>t.price.Gozo?`€${t.price.Gozo}`:"-"})},{key:"Overtime",title:n("yTravel.resource.vehicle.overtime"),align:"center",render:t=>S(N,{},{default:()=>t.price.Overtime?`€${t.price.Overtime}`:"-"})}]}function we(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ee(t)}const $e=I({__name:"index",props:{vehicleCompany:{}},setup(t){var d;const y=t,T=$(((d=y.vehicleCompany)==null?void 0:d.vehicleTypes)||[]);function c(){return[{key:"actions",title:n("yTravel.property.operation"),align:"center",render:f=>{let u;return e(Q,{justify:"center"},{default:()=>[e(M,{size:"small",onClick:()=>l(f.id)},we(u=n("yTravel.common.showDetail"))?u:{default:()=>[u]})]})}}]}const{bool:_,setTrue:D}=J();async function s(){const{data:f}=await P.list("",{company:y.vehicleCompany.id});f&&(T.value=JSON.parse(JSON.stringify(f.items)))}const v=$({}),{bool:p,setTrue:o}=J();function l(f){const u=T.value.find(x=>x.id===f);u&&(v.value=u,o())}return H(()=>y.vehicleCompany,f=>{var u;f&&(T.value=JSON.parse(JSON.stringify((u=y.vehicleCompany)==null?void 0:u.vehicleTypes)))}),(f,u)=>{const x=ge;return C(),q(X,null,[e(oe,{ref:"listTable","columns-fn":a(Ne),data:T.value,"action-columns-fn":c,"init-load":!1},{default:i(()=>[e(a(M),{size:"small",type:"primary",onClick:a(D)},{default:i(()=>[e(x,{class:"mr-4px text-20px"}),z(" "+O(a(n)("yTravel.common.add")),1)]),_:1},8,["onClick"])]),_:1},8,["columns-fn","data"]),e(De,{visible:a(_),"onUpdate:visible":u[0]||(u[0]=m=>R(_)?_.value=m:null),onSucceed:s},null,8,["visible"]),e(Se,{visible:a(p),"onUpdate:visible":u[1]||(u[1]=m=>R(p)?p.value=m:null),"vehicle-type":v.value},null,8,["visible","vehicle-type"])],64)}}}),da=I({__name:"index",setup(t){const y=ae(),T=$({});async function c(){var v;const D=(v=y.query)==null?void 0:v.id,{data:s}=await V.get(D);s&&(T.value=s)}te(()=>{c()});async function _(D,s){var o,l,d;const v=(o=y.query)==null?void 0:o.id,{error:p}=await V.update(v,D);p?(l=window.$message)==null||l.error(`${n("yTravel.common.operateFailed")} ${p.msg}`):(d=window.$message)==null||d.success(n("yTravel.common.editSuccess")),s(p)}return(D,s)=>{const v=ue,p=de,o=_e,l=K,d=le;return C(),U(d,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:i(()=>[e(l,{cols:2},{default:i(()=>[e(v,{span:2},{default:i(()=>[e(fe,{data:T.value,onUpdate:_},null,8,["data"])]),_:1}),e(v,{span:2,class:"py-10px"},{default:i(()=>[e(o,{type:"line",animated:""},{default:i(()=>[e(p,{name:"lot",tab:a(n)("yTravel.resource.vehicleCompany.detail.vehicleTypeList")},{default:i(()=>[e($e,{"vehicle-company":T.value||[]},null,8,["vehicle-company"])]),_:1},8,["tab"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{da as default};
