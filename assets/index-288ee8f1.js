import{_ as W}from"./round-plus-df65e5c8.js";import{d as L,c as X,r as k,bm as ee,aS as _,aH as O,aK as z,aL as n,aQ as a,aM as o,k7 as r,aR as x,aO as H,ae as q,aY as te,h as C,dh as h,k9 as ae,aZ as le,bb as ne,b8 as oe,bx as re,by as se,e8 as ue}from"./index-7d88c287.js";import{i as K}from"./inquiry-9caaa758.js";import{_ as ie}from"./ListTable.vue_vue_type_script_setup_true_lang-f17df0df.js";import{_ as pe,a as de}from"./SearchableSelect.vue_vue_type_script_setup_true_lang-ed258ae2.js";import{c as me,u as c,a as ce}from"./rule-00386333.js";import{c as _e}from"./client-c1de1443.js";import{N as Q}from"./Tag-f9ad861a.js";import{_ as fe}from"./Input-ffdad1fe.js";import{N as Y}from"./Space-9d9d608e.js";import{_ as be}from"./FormItemGridItem-6e368cab.js";import{_ as ve}from"./InputNumber-abdefede.js";import{a as ye}from"./Grid-4bf13ce0.js";import{N as $,s as V,a as ge}from"./time-8155d1fb.js";import"./crud-ca5eec89.js";import"./refresh-a3259f6e.js";import"./use-loading-37c1118f.js";import"./vuedraggable.umd-64e6f377.js";import"./Checkbox-9ba985cc.js";import"./use-merged-state-25180a9d.js";import"./Popover-5b10a0f7.js";import"./Suffix-e9302ec1.js";import"./get-c991346f.js";import"./format-length-c9d165c6.js";import"./cssr-b4c9f431.js";import"./use-compitable-51841f38.js";import"./next-frame-once-7035a838.js";import"./DataTable-895cc5c9.js";import"./Dropdown-7051e15f.js";import"./Select-303f22e9.js";import"./Ellipsis-0f9030da.js";import"./create-ref-setter-f485918b.js";import"./PerformantEllipsis-328d4c5a.js";import"./Pagination-a07528c5.js";import"./Forward-1c09c58f.js";import"./Add-fb180c3e.js";const Te=L({__name:"AddInquiryModal",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(i,{emit:p}){const v=i,d=X({get(){return v.visible},set(g){p("update:visible",g)}}),y=()=>{d.value=!1},f=k(),e=ee({}),m={groupNumber:me(_("yTravel.property.groupNumberPlaceholder")),clientId:c,address:c,startTime:c,endTime:c,peopleCount:c,guideCount:c,hotelIds:c,carTypeIds:c,comment:c},s=k(),u=k();async function I(){var l,T;e.startTime=s.value,e.endTime=u.value,await((l=f.value)==null?void 0:l.validate());const{error:g}=await K.create(e);g||((T=window.$message)==null||T.success(_("yTravel.common.addSuccess")),y(),p("succeed"))}return(g,l)=>{const T=Q,A=fe,w=Y,b=be,Z=pe,P=q,R=de,S=ve,E=ye,G=ce,J=te;return O(),z(J,{show:d.value,"onUpdate:show":l[7]||(l[7]=N=>d.value=N),preset:"card",title:o(_)("yTravel.common.add")+" "+o(_)("yTravel.inquiry.tittle"),class:"w-700px"},{default:n(()=>[a(G,{ref_key:"formRef",ref:f,class:"w-80% m-auto","label-placement":"left","label-width":150,model:e,rules:m},{default:n(()=>[a(E,{cols:12,"x-gap":18},{default:n(()=>{var N,U,j,M,B,D,F;return[a(b,{span:12,label:(N=o(r).find(t=>t.value==="groupNumber"))==null?void 0:N.label,path:"groupNumber"},{default:n(()=>[a(w,{align:"center",justify:"center"},{default:n(()=>[a(T,{type:"success"},{default:n(()=>[x("No.Prefix")]),_:1}),a(A,{value:e.groupNumber,"onUpdate:value":l[0]||(l[0]=t=>e.groupNumber=t),clearable:""},null,8,["value"])]),_:1})]),_:1},8,["label"]),a(b,{span:12,label:(U=o(r).find(t=>t.value==="client"))==null?void 0:U.label,path:"clientId"},{default:n(()=>[a(w,{align:"center",justify:"center"},{default:n(()=>[a(Z,{value:e.clientId,"list-fn":o(_e).listBaseInfo,"onUpdate:value":l[1]||(l[1]=t=>e.clientId=t==null?void 0:t.value)},null,8,["value","list-fn"]),a(P,{type:"info"},{default:n(()=>[x("+")]),_:1})]),_:1})]),_:1},8,["label"]),a(b,{span:12,label:(j=o(r).find(t=>t.value==="address"))==null?void 0:j.label,path:"address"},{default:n(()=>[a(A,{value:e.address,"onUpdate:value":l[2]||(l[2]=t=>e.address=t),clearable:"","default-value":"Malta"},null,8,["value"])]),_:1},8,["label"]),a(b,{span:12,label:(M=o(r).find(t=>t.value==="startTime"))==null?void 0:M.label,path:"startTime"},{default:n(()=>[a(R,{value:s.value,"onUpdate:value":l[3]||(l[3]=t=>s.value=t),clearable:""},null,8,["value"])]),_:1},8,["label"]),a(b,{span:12,label:(B=o(r).find(t=>t.value==="endTime"))==null?void 0:B.label,path:"endTime"},{default:n(()=>[a(R,{value:u.value,"onUpdate:value":l[4]||(l[4]=t=>u.value=t),clearable:""},null,8,["value"])]),_:1},8,["label"]),a(b,{span:12,label:(D=o(r).find(t=>t.value==="peopleCount"))==null?void 0:D.label,path:"peopleCount"},{default:n(()=>[a(S,{value:e.peopleCount,"onUpdate:value":l[5]||(l[5]=t=>e.peopleCount=t),clearable:""},null,8,["value"])]),_:1},8,["label"]),a(b,{span:12,label:(F=o(r).find(t=>t.value==="guideCount"))==null?void 0:F.label,path:"guideCount"},{default:n(()=>[a(S,{value:e.guideCount,"onUpdate:value":l[6]||(l[6]=t=>e.guideCount=t),clearable:""},null,8,["value"])]),_:1},8,["label"])]}),_:1})]),_:1},8,["model"]),a(w,{class:"w-full pt-16px",size:24,justify:"end"},{default:n(()=>[a(P,{class:"w-72px",type:"primary",onClick:I},{default:n(()=>[x(H(o(_)("yTravel.common.confirm")),1)]),_:1})]),_:1})]),_:1},8,["show","title"])}}});function Ne(){var i,p,v,d,y,f;return[{key:"groupNumber",title:_("yTravel.property.groupNumber"),align:"center"},{key:"client",title:(i=r.find(e=>e.value==="client"))==null?void 0:i.label,align:"center",render:e=>C($,{},{default:()=>{var m;return(m=e.client)==null?void 0:m.name}})},{key:"groupPeriod",title:(p=r.find(e=>e.value==="groupPeriod"))==null?void 0:p.label,align:"center",render:e=>C($,{},{default:()=>`${h(e.startTime)?V(e.startTime):""} -- ${h(e.endTime)?V(e.endTime):""}`})},{key:"peopleCount",title:(v=r.find(e=>e.value==="peopleCount"))==null?void 0:v.label,align:"center"},{key:"address",title:(d=r.find(e=>e.value==="address"))==null?void 0:d.label,align:"center"},{key:"createdAt",title:(y=r.find(e=>e.value==="createdAt"))==null?void 0:y.label,align:"center",render:e=>C($,{},{default:()=>h(e.createdAt)?ge(e.createdAt):""})},{key:"status",title:(f=r.find(e=>e.value==="status"))==null?void 0:f.label,align:"center",render:e=>{const m=ae[e.status||"1"];return C(Q,{type:m.type},{default:()=>m.label})}}]}function Ce(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!ue(i)}const ot=L({__name:"index",setup(i){const{bool:p,setTrue:v}=le(),d=k(),y=()=>{var s;return(s=d.value)==null?void 0:s.loadTableData()};function f(){return[{key:"actions",title:_("yTravel.property.operation"),align:"center",render:s=>{let u;return a(Y,{justify:"center"},{default:()=>[a(q,{size:"small",onClick:()=>m(s.id)},Ce(u=_("yTravel.common.showDetail"))?u:{default:()=>[u]})]})}}]}const{routerPush:e}=ne();function m(s){e({name:re("y-travel_inquiry-detail"),query:{id:s}})}return(s,u)=>{const I=W,g=se;return O(),z(g,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:n(()=>[a(ie,{ref_key:"listTable",ref:d,"columns-fn":o(Ne),"action-columns-fn":f,"load-data":o(K).list},{default:n(()=>[a(o(q),{size:"small",type:"primary",onClick:o(v)},{default:n(()=>[a(I,{class:"mr-4px text-20px"}),x(" "+H(o(_)("yTravel.common.add")),1)]),_:1},8,["onClick"])]),_:1},8,["columns-fn","load-data"]),a(Te,{visible:o(p),"onUpdate:visible":u[0]||(u[0]=l=>oe(p)?p.value=l:null),onSucceed:y},null,8,["visible"])]),_:1})}}});export{ot as default};
