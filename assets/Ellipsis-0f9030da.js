import{bm as E,cX as M,cY as B,B as $,a2 as k,cZ as D,a1 as y,w as L,d as _,o as N,q as C,r as g,c as T,h as w,c_ as H,e as I,az as K,g as O,c$ as q,c3 as z,d0 as A,K as U}from"./index-7d88c287.js";import{N as X,p as Y}from"./Popover-5b10a0f7.js";function W(t={},i){const n=E({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:a,keyup:c}=t,d=s=>{switch(s.key){case"Control":n.ctrl=!0;break;case"Meta":n.command=!0,n.win=!0;break;case"Shift":n.shift=!0;break;case"Tab":n.tab=!0;break}a!==void 0&&Object.keys(a).forEach(u=>{if(u!==s.key)return;const r=a[u];if(typeof r=="function")r(s);else{const{stop:m=!1,prevent:h=!1}=r;m&&s.stopPropagation(),h&&s.preventDefault(),r.handler(s)}})},f=s=>{switch(s.key){case"Control":n.ctrl=!1;break;case"Meta":n.command=!1,n.win=!1;break;case"Shift":n.shift=!1;break;case"Tab":n.tab=!1;break}c!==void 0&&Object.keys(c).forEach(u=>{if(u!==s.key)return;const r=c[u];if(typeof r=="function")r(s);else{const{stop:m=!1,prevent:h=!1}=r;m&&s.stopPropagation(),h&&s.preventDefault(),r.handler(s)}})},p=()=>{(i===void 0||i.value)&&(y("keydown",document,d),y("keyup",document,f)),i!==void 0&&L(i,s=>{s?(y("keydown",document,d),y("keyup",document,f)):(k("keydown",document,d),k("keyup",document,f))})};return M()?(B(p),$(()=>{(i===void 0||i.value)&&(k("keydown",document,d),k("keyup",document,f))})):p(),D(n)}const Z=Object.assign(Object.assign({},Y),C.props),F=_({name:"Tooltip",props:Z,__popover__:!0,setup(t){const{mergedClsPrefixRef:i}=N(t),n=C("Tooltip","-tooltip",void 0,H,t,i),a=g(null);return Object.assign(Object.assign({},{syncPosition(){a.value.syncPosition()},setShow(d){a.value.setShow(d)}}),{popoverRef:a,mergedTheme:n,popoverThemeOverrides:T(()=>n.value.self)})},render(){const{mergedTheme:t,internalExtraClass:i}=this;return w(X,Object.assign(Object.assign({},this.$props),{theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:i.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),G=I("ellipsis",{overflow:"hidden"},[K("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),O("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),O("cursor-pointer",`
 cursor: pointer;
 `)]);function P(t){return`${t}-ellipsis--line-clamp`}function j(t,i){return`${t}-ellipsis--cursor-${i}`}const J=Object.assign(Object.assign({},C.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),ee=_({name:"Ellipsis",inheritAttrs:!1,props:J,setup(t,{slots:i,attrs:n}){const a=q(),c=C("Ellipsis","-ellipsis",G,A,t,a),d=g(null),f=g(null),p=g(null),s=g(!1),u=T(()=>{const{lineClamp:e}=t,{value:o}=s;return e!==void 0?{textOverflow:"","-webkit-line-clamp":o?"":e}:{textOverflow:o?"":"ellipsis","-webkit-line-clamp":""}});function r(){let e=!1;const{value:o}=s;if(o)return!0;const{value:l}=d;if(l){const{lineClamp:v}=t;if(S(l),v!==void 0)e=l.scrollHeight<=l.offsetHeight;else{const{value:x}=f;x&&(e=x.getBoundingClientRect().width<=l.getBoundingClientRect().width)}R(l,e)}return e}const m=T(()=>t.expandTrigger==="click"?()=>{var e;const{value:o}=s;o&&((e=p.value)===null||e===void 0||e.setShow(!1)),s.value=!o}:void 0);z(()=>{var e;t.tooltip&&((e=p.value)===null||e===void 0||e.setShow(!1))});const h=()=>w("span",Object.assign({},U(n,{class:[`${a.value}-ellipsis`,t.lineClamp!==void 0?P(a.value):void 0,t.expandTrigger==="click"?j(a.value,"pointer"):void 0],style:u.value}),{ref:"triggerRef",onClick:m.value,onMouseenter:t.expandTrigger==="click"?r:void 0}),t.lineClamp?i:w("span",{ref:"triggerInnerRef"},i));function S(e){if(!e)return;const o=u.value,l=P(a.value);t.lineClamp!==void 0?b(e,l,"add"):b(e,l,"remove");for(const v in o)e.style[v]!==o[v]&&(e.style[v]=o[v])}function R(e,o){const l=j(a.value,"pointer");t.expandTrigger==="click"&&!o?b(e,l,"add"):b(e,l,"remove")}function b(e,o,l){l==="add"?e.classList.contains(o)||e.classList.add(o):e.classList.contains(o)&&e.classList.remove(o)}return{mergedTheme:c,triggerRef:d,triggerInnerRef:f,tooltipRef:p,handleClick:m,renderTrigger:h,getTooltipDisabled:r}},render(){var t;const{tooltip:i,renderTrigger:n,$slots:a}=this;if(i){const{mergedTheme:c}=this;return w(F,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:c.peers.Tooltip,themeOverrides:c.peerOverrides.Tooltip}),{trigger:n,default:(t=a.tooltip)!==null&&t!==void 0?t:a.default})}else return n()}});export{ee as N,F as _,j as a,P as c,J as e,G as s,W as u};
