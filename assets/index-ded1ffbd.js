import{r as $,d as N,w as B,aH as g,aK as x,aL as e,aQ as t,aR as T,aO as D,aM as v,by as I,k5 as F,aI as M,aT as A,av as E,aJ as P,ba as L,cY as R,aS as C}from"./index-7d88c287.js";import{s as U}from"./sales-6bc0e5fc.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-0822e75b.js";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang-1d5ac1dd.js";import{N as J}from"./time-8155d1fb.js";import{_ as O,a as w}from"./Grid-4bf13ce0.js";import{c as H}from"./carType-2757d897.js";import{M as q}from"./SearchableSelect.vue_vue_type_script_setup_true_lang-ed258ae2.js";import{a as K}from"./hotel-ccaf918d.js";import"./crud-ca5eec89.js";import"./client-c1de1443.js";import"./PerformantEllipsis-328d4c5a.js";import"./Ellipsis-0f9030da.js";import"./Popover-5b10a0f7.js";import"./Suffix-e9302ec1.js";import"./get-c991346f.js";import"./format-length-c9d165c6.js";import"./cssr-b4c9f431.js";import"./use-merged-state-25180a9d.js";import"./use-compitable-51841f38.js";import"./next-frame-once-7035a838.js";import"./DescriptionsItem-0ee3ee92.js";import"./Space-9d9d608e.js";import"./Tag-f9ad861a.js";import"./Input-ffdad1fe.js";import"./InputNumber-abdefede.js";import"./Add-fb180c3e.js";import"./Select-303f22e9.js";import"./Switch-9b885204.js";import"./Checkbox-9ba985cc.js";import"./Forward-1c09c58f.js";function Q(){const i=$({});function l(r){r&&(i.value=JSON.parse(JSON.stringify(r)))}return{baseData:i,loadData:l}}const Y=N({__name:"index",props:{data:{}},emits:["update"],setup(i,{emit:l}){const r=i,{baseData:p,loadData:u}=Q();B(()=>r.data,n=>u(n));function c(n,a,d){const o={};o[n]=a,l("update",o,d)}return(n,a)=>{const d=J,o=O,s=w,m=I;return g(),x(m,{columns:2,"label-placement":"left",class:"text-center w-full rounded-16px",bordered:""},{default:e(()=>[t(s,{cols:8,class:"w-full","y-gap":8},{default:e(()=>[t(o,{span:1},{default:e(()=>[t(d,null,{default:e(()=>[T(D(n.$t("yTravel.property.mealCount")+": "),1)]),_:1})]),_:1}),t(o,{span:3},{default:e(()=>{var _;return[t(h,{label:n.$t("yTravel.property.mealCount")+": ",data:(_=v(p))==null?void 0:_.mealCount,"edit-component-props":{component:"NInputNumber"},onSubmit:a[0]||(a[0]=(f,y)=>c("mealCount",f,y))},null,8,["label","data"])]}),_:1}),t(o,{span:1},{default:e(()=>[t(d,null,{default:e(()=>[T(D(n.$t("yTravel.property.mealStandard")+": "),1)]),_:1})]),_:1}),t(o,{span:3},{default:e(()=>{var _;return[t(h,{label:n.$t("yTravel.property.mealStandard")+": ",data:(_=v(p))==null?void 0:_.mealStandard,onSubmit:a[1]||(a[1]=(f,y)=>c("mealStandard",f,y))},null,8,["label","data"])]}),_:1})]),_:1})]),_:1})}}});function z(){const i=$({}),l=$([]);function r(p){var u,c;p&&(i.value=JSON.parse(JSON.stringify(p)),((u=l.value)==null?void 0:u.length)===0&&((c=p.carTypes)==null||c.forEach(n=>{l.value=q(l.value,F(n.carType))})))}return{baseData:i,carTypeOptions:l,loadData:r}}const G=N({__name:"index",props:{data:{}},emits:["update"],setup(i,{emit:l}){const r=i,{baseData:p,carTypeOptions:u,loadData:c}=z();function n(a,d){var m;const o=((m=p.value.carTypes)==null?void 0:m.find(_=>_.id===a.id))??{};o[a.key]=a.value;const s={};s.car={id:o},l("update",s,d)}return B(()=>r.data,a=>{c(a)}),(a,d)=>{const o=J,s=O,m=w,_=I;return g(),x(_,{columns:2,"label-placement":"left",class:"text-center w-full rounded-16px",bordered:""},{default:e(()=>[(g(!0),M(E,null,A(v(p).carTypes,(f,y)=>(g(),x(m,{key:y,cols:4,class:"w-full","y-gap":8},{default:e(()=>[t(s,{span:1},{default:e(()=>[t(o,null,{default:e(()=>[T(D(a.$t("yTravel.property.carType")+(y>0?y:"")+": "),1)]),_:2},1024)]),_:2},1024),t(s,{span:3},{default:e(()=>{var b;return[t(h,{label:a.$t("yTravel.property.carType")+": ",data:(b=f.carType)==null?void 0:b.id,"edit-component-props":{component:"SearchableSelect",options:v(u),listFn:v(H).listBaseInfo},onSubmit:(S,k)=>n({id:f.id,key:"carTypeId",value:S},k)},null,8,["label","data","edit-component-props","onSubmit"])]}),_:2},1024)]),_:2},1024))),128))]),_:1})}}});function W(){const i=$({}),l=$([]);function r(p){var u,c;p&&(i.value=JSON.parse(JSON.stringify(p)),((u=l.value)==null?void 0:u.length)===0&&((c=p.hotels)==null||c.forEach(n=>{l.value=q(l.value,F(n.hotel))})))}return{baseData:i,hotelOptions:l,loadData:r}}const X=P("br",null,null,-1),Z=P("br",null,null,-1),V=N({__name:"index",props:{data:{}},emits:["update"],setup(i,{emit:l}){const r=i,{baseData:p,hotelOptions:u,loadData:c}=W();function n(a,d){var m;const o=((m=p.value.carTypes)==null?void 0:m.find(_=>_.id===a.id))??{};o[a.key]=a.value;const s={};s.car={id:o},l("update",s,d)}return B(()=>r.data,a=>{c(a)}),(a,d)=>{const o=J,s=O,m=w,_=I;return g(),x(_,{"label-placement":"left",class:"w-full rounded-16px",bordered:""},{default:e(()=>[(g(!0),M(E,null,A(v(p).hotels,(f,y)=>(g(),x(m,{key:y,cols:6,class:"text-center w-full my-20px"},{default:e(()=>[t(s,{span:1},{default:e(()=>[t(o,null,{default:e(()=>[T(D(a.$t("yTravel.property.hotel")+(y>0?y:"")+": "),1)]),_:2},1024)]),_:2},1024),t(s,{span:1},{default:e(()=>{var b;return[t(h,{label:a.$t("yTravel.property.hotel")+": ",data:(b=f.hotel)==null?void 0:b.id,"edit-component-props":{component:"SearchableSelect",options:v(u),listFn:v(K).listBaseInfo},onSubmit:(S,k)=>n({id:f.id,key:"hotelId",value:S},k)},null,8,["label","data","edit-component-props","onSubmit"])]}),_:2},1024),t(s,{span:1},{default:e(()=>[t(o,null,{default:e(()=>[T(" Twin: "),X,T(" €0/Night ")]),_:1})]),_:1}),t(s,{span:1},{default:e(()=>[t(h,{label:"Twin:",data:5,"edit-component-props":{component:"NInputNumber"},onSubmit:(b,S)=>n({id:f.id,key:"hotelId",value:b},S)},null,8,["onSubmit"])]),_:2},1024),t(s,{span:1},{default:e(()=>[t(o,null,{default:e(()=>[T(" Single: "),Z,T(" €0/Night ")]),_:1})]),_:1}),t(s,{span:1},{default:e(()=>[t(h,{label:"Single:",data:5,"edit-component-props":{component:"NInputNumber"},onSubmit:(b,S)=>n({id:f.id,key:"hotelId",value:b},S)},null,8,["onSubmit"])]),_:2},1024)]),_:2},1024))),128))]),_:1})}}}),Bt=N({__name:"index",setup(i){const l=L(),r=$({});async function p(){var a;const c=(a=l.query)==null?void 0:a.id,{data:n}=await U.get(c);n&&(r.value=n)}R(()=>{p()});async function u(c,n){var o,s,m;const a=(o=l.query)==null?void 0:o.id,{error:d}=await U.update(a,c);d?(s=window.$message)==null||s.error(`${C("yTravel.common.operateFailed")} ${d.msg}`):(m=window.$message)==null||m.success(C("yTravel.common.editSuccess")),n(d)}return(c,n)=>{const a=O,d=w,o=I;return g(),x(o,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:e(()=>[t(d,{cols:2},{default:e(()=>[t(a,{span:1,class:"px-20px"},{default:e(()=>[t(d,{cols:1},{default:e(()=>[t(a,{span:1,class:"py-10px"},{default:e(()=>[t(j,{data:r.value,onUpdate:u},null,8,["data"])]),_:1})]),_:1})]),_:1}),t(a,{span:1,class:"px-20px"},{default:e(()=>[t(d,{cols:1},{default:e(()=>[t(a,{span:1,class:"py-10px"},{default:e(()=>[t(Y,{data:r.value,onUpdate:u},null,8,["data"])]),_:1}),t(a,{span:1,class:"py-10px"},{default:e(()=>[t(G,{data:r.value,onUpdate:u},null,8,["data"])]),_:1}),t(a,{span:1,class:"py-10px"},{default:e(()=>[t(V,{data:r.value,onUpdate:u},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Bt as default};
