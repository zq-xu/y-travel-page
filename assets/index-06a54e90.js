import{_ as V}from"./round-plus-df65e5c8.js";import{aS as l,h as x,d as A,c as F,r as k,bm as B,aH as I,aK as U,aL as r,aQ as a,aM as e,aR as S,aO as $,ae as O,aY as G,dh as j,w as q,k8 as L,aZ as H,b8 as R,by as P,e8 as J}from"./index-7d88c287.js";import{b as C}from"./vehicle-cfe28117.js";import{_ as K}from"./ListTable.vue_vue_type_script_setup_true_lang-f17df0df.js";import{N as w,a as Q}from"./time-8155d1fb.js";import{c as Y,u as z,a as Z}from"./rule-00386333.js";import{_ as E}from"./Input-ffdad1fe.js";import{_ as W}from"./FormItemGridItem-6e368cab.js";import{_ as X}from"./InputNumber-abdefede.js";import{a as ee}from"./Grid-4bf13ce0.js";import{N as M}from"./Space-9d9d608e.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-1d5ac1dd.js";import{d as le}from"./handler-eb310ea7.js";import{_ as te,a as oe}from"./DescriptionsItem-0ee3ee92.js";import"./crud-ca5eec89.js";import"./refresh-a3259f6e.js";import"./use-loading-37c1118f.js";import"./vuedraggable.umd-64e6f377.js";import"./Checkbox-9ba985cc.js";import"./use-merged-state-25180a9d.js";import"./Popover-5b10a0f7.js";import"./Suffix-e9302ec1.js";import"./get-c991346f.js";import"./format-length-c9d165c6.js";import"./cssr-b4c9f431.js";import"./use-compitable-51841f38.js";import"./next-frame-once-7035a838.js";import"./DataTable-895cc5c9.js";import"./Dropdown-7051e15f.js";import"./Select-303f22e9.js";import"./Tag-f9ad861a.js";import"./Ellipsis-0f9030da.js";import"./create-ref-setter-f485918b.js";import"./PerformantEllipsis-328d4c5a.js";import"./Pagination-a07528c5.js";import"./Forward-1c09c58f.js";import"./Add-fb180c3e.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-ed258ae2.js";import"./Switch-9b885204.js";function ne(){return[{key:"name",title:l("yTravel.property.name"),align:"center",render:t=>x(w,{},{default:()=>t.name})},{key:"FullDay",title:l("yTravel.resource.vehicle.fullDay"),align:"center",render:t=>x(w,{},{default:()=>t.price.FullDay?`€${t.price.FullDay}`:"-"})},{key:"HalfDay",title:l("yTravel.resource.vehicle.halfDay"),align:"center",render:t=>x(w,{},{default:()=>t.price.HalfDay?`€${t.price.HalfDay}`:"-"})},{key:"Transfer",title:l("yTravel.resource.vehicle.transfer"),align:"center",render:t=>x(w,{},{default:()=>t.price.Transfer?`€${t.price.Transfer}`:"-"})},{key:"Gozo",title:l("yTravel.resource.vehicle.gozo"),align:"center",render:t=>x(w,{},{default:()=>t.price.Gozo?`€${t.price.Gozo}`:"-"})},{key:"Overtime",title:l("yTravel.resource.vehicle.overtime"),align:"center",render:t=>x(w,{},{default:()=>t.price.Overtime?`€${t.price.Overtime}`:"-"})}]}const re=A({__name:"AddVehicleInquiryModal",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(t,{emit:T}){const g=t,d=F({get(){return g.visible},set(s){T("update:visible",s)}}),c=()=>{d.value=!1},N=k(),p=B({price:{FullDay:0,HalfDay:0,Transfer:0,Gozo:0,Overtime:0}}),D={name:Y(l("yTravel.property.namePlaceholder")),id:z,createdAt:z,updatedAt:z,comment:z,vehicleCompanyId:z,price:z};async function f(){var o,u;await((o=N.value)==null?void 0:o.validate());const{error:s}=await C.create(p);s||((u=window.$message)==null||u.success(l("yTravel.common.addSuccess")),c(),T("succeed"))}return(s,o)=>{const u=E,i=W,_=X,h=ee,n=Z,m=O,y=M,b=G;return I(),U(b,{show:d.value,"onUpdate:show":o[6]||(o[6]=v=>d.value=v),preset:"card",title:e(l)("yTravel.common.add")+" "+e(l)("yTravel.resource.vehicleCompany.tittle"),class:"w-700px"},{default:r(()=>[a(n,{ref_key:"formRef",ref:N,class:"w-80% m-auto","label-placement":"left","label-width":150,model:p,rules:D},{default:r(()=>[a(h,{cols:12,"x-gap":18},{default:r(()=>[a(i,{span:12,label:e(l)("yTravel.property.name"),path:"name"},{default:r(()=>[a(u,{value:p.name,"onUpdate:value":o[0]||(o[0]=v=>p.name=v),autosize:"",class:"min-w-60%",clearable:""},null,8,["value"])]),_:1},8,["label"]),a(i,{span:12,label:e(l)("yTravel.resource.vehicle.fullDay")+" / €"},{default:r(()=>[a(_,{value:p.price.FullDay,"onUpdate:value":o[1]||(o[1]=v=>p.price.FullDay=v)},null,8,["value"])]),_:1},8,["label"]),a(i,{span:12,label:e(l)("yTravel.resource.vehicle.halfDay")+" / €"},{default:r(()=>[a(_,{value:p.price.HalfDay,"onUpdate:value":o[2]||(o[2]=v=>p.price.HalfDay=v)},null,8,["value"])]),_:1},8,["label"]),a(i,{span:12,label:e(l)("yTravel.resource.vehicle.transfer")+" / €"},{default:r(()=>[a(_,{value:p.price.Transfer,"onUpdate:value":o[3]||(o[3]=v=>p.price.Transfer=v)},null,8,["value"])]),_:1},8,["label"]),a(i,{span:12,label:e(l)("yTravel.resource.vehicle.gozo")+" / €"},{default:r(()=>[a(_,{value:p.price.Gozo,"onUpdate:value":o[4]||(o[4]=v=>p.price.Gozo=v)},null,8,["value"])]),_:1},8,["label"]),a(i,{span:12,label:e(l)("yTravel.resource.vehicle.overtime")+" / €"},{default:r(()=>[a(_,{value:p.price.Overtime,"onUpdate:value":o[5]||(o[5]=v=>p.price.Overtime=v)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),a(y,{class:"w-full pt-16px",size:24,justify:"end"},{default:r(()=>[a(m,{class:"w-72px",type:"primary",onClick:f},{default:r(()=>[S($(e(l)("yTravel.common.confirm")),1)]),_:1})]),_:1})]),_:1},8,["show","title"])}}});function ie(){const t=k({}),T=F(()=>{var d,c;return j((d=t.value)==null?void 0:d.createdAt)?Q((c=t.value)==null?void 0:c.createdAt):""});function g(d){d&&(t.value=JSON.parse(JSON.stringify(d)))}return{data:t,createdAt:T,loadData:g}}const se=A({__name:"index",props:{visible:{type:Boolean},vehicleType:{}},emits:["update:visible","updateSucceed"],setup(t,{emit:T}){const g=t,d=F({get(){return g.visible},set(f){T("update:visible",f)}}),{data:c,createdAt:N,loadData:p}=ie();async function D(f,s,o){const u={};u[f]=s,await le(()=>C.update(c.value.id,u),o)}return q(()=>g.vehicleType,f=>p(f)),(f,s)=>{const o=te,u=ae,i=oe,_=G;return I(),U(_,{show:d.value,"onUpdate:show":s[5]||(s[5]=h=>d.value=h),preset:"card",title:e(l)("yTravel.resource.vehicleInquiry.detail.tittle"),class:"w-600px"},{default:r(()=>[a(i,{columns:2,"label-placement":"left",class:"text-center",bordered:""},{default:r(()=>{var h;return[a(o,{span:2,label:e(l)("yTravel.property.name")},{default:r(()=>[S($(e(c).name),1)]),_:1},8,["label"]),a(o,{span:2,label:e(l)("yTravel.resource.vehicle.fullDay")+" / €"},{default:r(()=>{var n,m;return[a(u,{label:e(l)("yTravel.resource.vehicle.fullDay"),data:(m=(n=e(c))==null?void 0:n.price)==null?void 0:m.FullDay,"edit-component-props":{component:"NInputNumber"},onSubmit:s[0]||(s[0]=(y,b)=>D("fullDay",y,b))},null,8,["label","data"])]}),_:1},8,["label"]),a(o,{span:2,label:e(l)("yTravel.resource.vehicle.halfDay")+" / €"},{default:r(()=>{var n,m;return[a(u,{label:e(l)("yTravel.resource.vehicle.halfDay"),data:(m=(n=e(c))==null?void 0:n.price)==null?void 0:m.HalfDay,"edit-component-props":{component:"NInputNumber"},onSubmit:s[1]||(s[1]=(y,b)=>D("halfDay",y,b))},null,8,["label","data"])]}),_:1},8,["label"]),a(o,{span:2,label:e(l)("yTravel.resource.vehicle.transfer")+" / €"},{default:r(()=>{var n,m;return[a(u,{label:e(l)("yTravel.resource.vehicle.transfer"),data:(m=(n=e(c))==null?void 0:n.price)==null?void 0:m.Transfer,"edit-component-props":{component:"NInputNumber"},onSubmit:s[2]||(s[2]=(y,b)=>D("transfer",y,b))},null,8,["label","data"])]}),_:1},8,["label"]),a(o,{span:2,label:e(l)("yTravel.resource.vehicle.gozo")+" / €"},{default:r(()=>{var n,m;return[a(u,{label:e(l)("yTravel.resource.vehicle.gozo"),data:(m=(n=e(c))==null?void 0:n.price)==null?void 0:m.Gozo,"edit-component-props":{component:"NInputNumber"},onSubmit:s[3]||(s[3]=(y,b)=>D("gozo",y,b))},null,8,["label","data"])]}),_:1},8,["label"]),a(o,{span:2,label:e(l)("yTravel.resource.vehicle.overtime")+" / €"},{default:r(()=>{var n,m;return[a(u,{label:e(l)("yTravel.resource.vehicle.overtime"),data:(m=(n=e(c))==null?void 0:n.price)==null?void 0:m.Overtime,"edit-component-props":{component:"NInputNumber"},onSubmit:s[4]||(s[4]=(y,b)=>D("overtime",y,b))},null,8,["label","data"])]}),_:1},8,["label"]),a(o,{span:2,label:(h=e(L).find(n=>n.value==="createdAt"))==null?void 0:h.label},{default:r(()=>[S($(e(N)),1)]),_:1},8,["label"])]}),_:1})]),_:1},8,["show","title"])}}});function ue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!J(t)}const Ye=A({__name:"index",setup(t){const{bool:T,setTrue:g}=H(),d=k(),c=k([]),N=()=>{var u;return(u=d.value)==null?void 0:u.loadTableData()};function p(){return[{key:"actions",title:l("yTravel.property.operation"),align:"center",render:u=>{let i;return a(M,{justify:"center"},{default:()=>[a(O,{size:"small",onClick:()=>o(u.id)},ue(i=l("yTravel.common.showDetail"))?i:{default:()=>[i]})]})}}]}const D=k({}),{bool:f,setTrue:s}=H();function o(u){const i=c.value.find(_=>_.id===u);i&&(D.value=i,s())}return(u,i)=>{const _=V,h=P;return I(),U(h,{bordered:!1,class:"rounded-16px shadow-sm"},{default:r(()=>[a(K,{ref_key:"listTable",ref:d,data:c.value,"onUpdate:data":i[0]||(i[0]=n=>c.value=n),"columns-fn":e(ne),"action-columns-fn":p,"load-data":e(C).list},{default:r(()=>[a(e(O),{size:"small",type:"primary",onClick:e(g)},{default:r(()=>[a(_,{class:"mr-4px text-20px"}),S(" "+$(e(l)("yTravel.common.add")),1)]),_:1},8,["onClick"])]),_:1},8,["data","columns-fn","load-data"]),a(re,{visible:e(T),"onUpdate:visible":i[1]||(i[1]=n=>R(T)?T.value=n:null),onSucceed:N},null,8,["visible"]),a(se,{visible:e(f),"onUpdate:visible":i[2]||(i[2]=n=>R(f)?f.value=n:null),"vehicle-type":D.value},null,8,["visible","vehicle-type"])]),_:1})}}});export{Ye as default};
