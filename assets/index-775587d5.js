import{r as h,d as S,w as O,aH as g,aK as x,aL as t,aQ as a,aR as m,aO as y,aM as b,by as $,k5 as M,aI as q,aT as C,av as U,ae as E,aS as D,ba as L,cY as R}from"./index-7d88c287.js";import{s as F}from"./sales-6bc0e5fc.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-0822e75b.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang-1d5ac1dd.js";import{N as P}from"./time-8155d1fb.js";import{_ as w,a as I}from"./Grid-4bf13ce0.js";import{c as z}from"./carType-2757d897.js";import{M as A}from"./SearchableSelect.vue_vue_type_script_setup_true_lang-ed258ae2.js";import{a as H}from"./hotel-ccaf918d.js";import{N as K}from"./Tag-f9ad861a.js";import"./crud-ca5eec89.js";import"./client-c1de1443.js";import"./PerformantEllipsis-328d4c5a.js";import"./Ellipsis-0f9030da.js";import"./Popover-5b10a0f7.js";import"./Suffix-e9302ec1.js";import"./get-c991346f.js";import"./format-length-c9d165c6.js";import"./cssr-b4c9f431.js";import"./use-merged-state-25180a9d.js";import"./use-compitable-51841f38.js";import"./next-frame-once-7035a838.js";import"./DescriptionsItem-0ee3ee92.js";import"./Space-9d9d608e.js";import"./Input-ffdad1fe.js";import"./InputNumber-abdefede.js";import"./Add-fb180c3e.js";import"./Select-303f22e9.js";import"./Switch-9b885204.js";import"./Checkbox-9ba985cc.js";import"./Forward-1c09c58f.js";function Q(){const d=h({});function s(o){o&&(d.value=JSON.parse(JSON.stringify(o)))}return{baseData:d,loadData:s}}const Y=S({__name:"index",props:{data:{}},emits:["update"],setup(d,{emit:s}){const o=d,{baseData:p,loadData:u}=Q();O(()=>o.data,n=>u(n));function i(n,e,c){const r={};r[n]=e,s("update",r,c)}return(n,e)=>{const c=P,r=w,_=I,l=$;return g(),x(l,{columns:2,"label-placement":"left",class:"text-center w-full rounded-16px",bordered:""},{default:t(()=>[a(_,{cols:8,class:"w-full","y-gap":8},{default:t(()=>[a(r,{span:1},{default:t(()=>[a(c,null,{default:t(()=>[m(y(n.$t("yTravel.property.mealCount")+": "),1)]),_:1})]),_:1}),a(r,{span:3},{default:t(()=>{var f;return[a(k,{label:n.$t("yTravel.property.mealCount")+": ",data:(f=b(p))==null?void 0:f.mealCount,"edit-component-props":{component:"NInputNumber"},onSubmit:e[0]||(e[0]=(v,T)=>i("mealCount",v,T))},null,8,["label","data"])]}),_:1}),a(r,{span:1},{default:t(()=>[a(c,null,{default:t(()=>[m(y(n.$t("yTravel.property.mealStandard")+": "),1)]),_:1})]),_:1}),a(r,{span:3},{default:t(()=>{var f;return[a(k,{label:n.$t("yTravel.property.mealStandard")+": ",data:(f=b(p))==null?void 0:f.mealStandard,onSubmit:e[1]||(e[1]=(v,T)=>i("mealStandard",v,T))},null,8,["label","data"])]}),_:1})]),_:1})]),_:1})}}});function G(){const d=h({}),s=h([]);function o(p){var u,i;p&&(d.value=JSON.parse(JSON.stringify(p)),((u=s.value)==null?void 0:u.length)===0&&((i=p.carTypes)==null||i.forEach(n=>{s.value=A(s.value,M(n.carType))})))}return{baseData:d,carTypeOptions:s,loadData:o}}const W=S({__name:"index",props:{data:{}},emits:["update"],setup(d,{emit:s}){const o=d,{baseData:p,carTypeOptions:u,loadData:i}=G();function n(e,c){var l;const r=((l=p.value.carTypes)==null?void 0:l.find(f=>f.id===e.id))??{};r[e.key]=e.value;const _={};_.car={id:r},s("update",_,c)}return O(()=>o.data,e=>{i(e)}),(e,c)=>{const r=P,_=w,l=I,f=$;return g(),x(f,{columns:2,"label-placement":"left",class:"text-center w-full rounded-16px",bordered:""},{default:t(()=>[(g(!0),q(U,null,C(b(p).carTypes,(v,T)=>(g(),x(l,{key:T,cols:4,class:"w-full","y-gap":8},{default:t(()=>[a(_,{span:1},{default:t(()=>[a(r,null,{default:t(()=>[m(y(e.$t("yTravel.property.carType")+(T>0?T:"")+": "),1)]),_:2},1024)]),_:2},1024),a(_,{span:3},{default:t(()=>{var N;return[a(k,{label:e.$t("yTravel.property.carType")+": ",data:(N=v.carType)==null?void 0:N.id,"edit-component-props":{component:"SearchableSelect",options:b(u),listFn:b(z).listBaseInfo},onSubmit:(J,B)=>n({id:v.id,key:"carTypeId",value:J},B)},null,8,["label","data","edit-component-props","onSubmit"])]}),_:2},1024)]),_:2},1024))),128))]),_:1})}}});function X(){const d=h({}),s=h([]);function o(p){var u,i;p&&(d.value=JSON.parse(JSON.stringify(p)),((u=s.value)==null?void 0:u.length)===0&&((i=p.hotels)==null||i.forEach(n=>{s.value=A(s.value,M(n.hotel))})))}return{baseData:d,hotelOptions:s,loadData:o}}const Z=S({__name:"index",props:{data:{}},emits:["update"],setup(d,{emit:s}){const o=d,{baseData:p,hotelOptions:u,loadData:i}=X();function n(e,c){var l;const r=((l=p.value.carTypes)==null?void 0:l.find(f=>f.id===e.id))??{};r[e.key]=e.value;const _={};_.car={id:r},s("update",_,c)}return O(()=>o.data,e=>{i(e)}),(e,c)=>{const r=P,_=w,l=I,f=$;return g(),x(f,{columns:2,"label-placement":"left",class:"text-center w-full rounded-16px",bordered:""},{default:t(()=>[(g(!0),q(U,null,C(b(p).hotels,(v,T)=>(g(),x(l,{key:T,cols:4,class:"w-full","y-gap":8},{default:t(()=>[a(_,{span:1},{default:t(()=>[a(r,null,{default:t(()=>[m(y(e.$t("yTravel.property.hotel")+(T>0?T:"")+": "),1)]),_:2},1024)]),_:2},1024),a(_,{span:3},{default:t(()=>{var N;return[a(k,{label:e.$t("yTravel.property.hotel")+": ",data:(N=v.hotel)==null?void 0:N.id,"edit-component-props":{component:"SearchableSelect",options:b(u),listFn:b(H).listBaseInfo},onSubmit:(J,B)=>n({id:v.id,key:"hotelId",value:J},B)},null,8,["label","data","edit-component-props","onSubmit"])]}),_:2},1024)]),_:2},1024))),128))]),_:1})}}});function V(){const d=h({});function s(o){o&&(d.value=JSON.parse(JSON.stringify(o)))}return{baseData:d,loadData:s}}const aa=S({__name:"index",props:{data:{}},setup(d){const s=d,{baseData:o,loadData:p}=V();return O(()=>s.data,u=>{p(u)}),(u,i)=>{const n=P,e=w,c=E,r=I,_=$;return g(),x(_,{title:"变更事项",class:"w-full rounded-16px",bordered:""},{default:t(()=>[(g(!0),q(U,null,C(b(o).changeInfo,(l,f)=>(g(),x(r,{key:f,cols:4,class:"text-center w-full my-5px","y-gap":8},{default:t(()=>[a(e,{span:1},{default:t(()=>[a(n,null,{default:t(()=>[m(y(u.$t("yTravel.property.hotel")+(f>0?f:"")+": "),1)]),_:2},1024)]),_:2},1024),a(e,{span:2},{default:t(()=>[a(n,null,{default:t(()=>[m(y(l.oldValue)+" => "+y(l.newValue),1)]),_:2},1024)]),_:2},1024),a(e,{span:1},{default:t(()=>[a(c,{size:"tiny",type:"warning"},{default:t(()=>[m("确认")]),_:1})]),_:1})]),_:2},1024))),128))]),_:1})}}}),ta=S({__name:"index",props:{data:{}},setup(d){const s=d,o=h({}),p=h({});return O(()=>s.data,u=>{var i;o.value=u,p.value=((i=u.inquiry)==null?void 0:i.inquiryPrice.find(n=>n.status===1))??{}}),(u,i)=>{const n=P,e=w,c=K,r=I,_=$;return g(),x(_,{columns:2,"label-placement":"left",class:"text-center w-full rounded-16px",bordered:""},{default:t(()=>[a(r,{cols:3,class:"w-full","y-gap":8},{default:t(()=>[a(e,{span:1},{default:t(()=>[a(n,null,{default:t(()=>[m(y(b(D)("yTravel.property.soldPrice")),1)]),_:1})]),_:1}),a(e,{span:1},{default:t(()=>[a(n,null,{default:t(()=>{var l;return[m(y(b(D)("yTravel.inquiry.averagePrice")+": €"+((l=p.value)==null?void 0:l.averagePrice)),1)]}),_:1})]),_:1}),a(e,{span:1},{default:t(()=>[a(n,null,{default:t(()=>{var l;return[m(y(b(D)("yTravel.property.totalPrice")+": €"+((l=p.value)==null?void 0:l.totalPrice)),1)]}),_:1})]),_:1}),a(e,{span:1},{default:t(()=>{var l,f;return[a(n,null,{default:t(()=>[m(y(b(D)("yTravel.property.paid")+": "),1)]),_:1}),a(c,{type:((l=o.value.sales)==null?void 0:l.paid)>=((f=o.value.sales)==null?void 0:f.shouldPay)?"success":"warning"},{default:t(()=>{var v;return[m(y("€"+((v=o.value.sales)==null?void 0:v.paid)),1)]}),_:1},8,["type"])]}),_:1}),a(e,{span:1},{default:t(()=>[a(n,null,{default:t(()=>[m(y(b(D)("yTravel.property.waitingPaid")+": "),1)]),_:1}),a(c,{type:"warning"},{default:t(()=>{var l;return[m(y("€"+((l=o.value.sales)==null?void 0:l.waitingPaid)),1)]}),_:1})]),_:1}),a(e,{span:1},{default:t(()=>[a(n,null,{default:t(()=>[m(y(b(D)("yTravel.property.shouldPay")+": "),1)]),_:1}),a(c,{type:"success"},{default:t(()=>{var l;return[m(y("€"+((l=o.value.sales)==null?void 0:l.shouldPay)),1)]}),_:1})]),_:1})]),_:1})]),_:1})}}}),Ba=S({__name:"index",setup(d){const s=L(),o=h({});async function p(){var e;const i=(e=s.query)==null?void 0:e.id,{data:n}=await F.get(i);n&&(o.value=n)}R(()=>{p()});async function u(i,n){var r,_,l;const e=(r=s.query)==null?void 0:r.id,{error:c}=await F.update(e,i);c?(_=window.$message)==null||_.error(`${D("yTravel.common.operateFailed")} ${c.msg}`):(l=window.$message)==null||l.success(D("yTravel.common.editSuccess")),n(c)}return(i,n)=>{const e=w,c=I,r=$;return g(),x(r,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:t(()=>[a(c,{cols:2},{default:t(()=>[a(e,{span:1,class:"px-20px"},{default:t(()=>[a(c,{cols:1},{default:t(()=>[a(e,{span:1,class:"py-10px"},{default:t(()=>[a(j,{data:o.value,onUpdate:u},null,8,["data"])]),_:1}),a(e,{span:1,class:"py-10px"},{default:t(()=>[a(ta,{data:o.value},null,8,["data"])]),_:1})]),_:1})]),_:1}),a(e,{span:1,class:"px-20px"},{default:t(()=>[a(c,{cols:1},{default:t(()=>[a(e,{span:1,class:"py-10px"},{default:t(()=>[a(Y,{data:o.value,onUpdate:u},null,8,["data"])]),_:1}),a(e,{span:1,class:"py-10px"},{default:t(()=>[a(W,{data:o.value,onUpdate:u},null,8,["data"])]),_:1}),a(e,{span:1,class:"py-10px"},{default:t(()=>[a(Z,{data:o.value,onUpdate:u},null,8,["data"])]),_:1}),a(e,{span:1,class:"py-10px"},{default:t(()=>[a(aa,{data:o.value},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Ba as default};
