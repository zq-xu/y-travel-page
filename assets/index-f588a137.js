import{_ as J,a as K}from"./refresh-a3259f6e.js";import{dj as Q,dk as Y,aH as k,aI as M,aJ as V,d as O,c as P,r as S,bm as I,w as Z,aK as H,aL as n,aQ as e,aT as G,aR as m,aO as q,aM as u,dl as W,av as X,dm as ee,ae as x,aY as te,aU as ne,aZ as ae,dn as oe,dp as se,aN as le,b8 as ie,by as ue}from"./index-7d88c287.js";import{_ as re}from"./round-plus-df65e5c8.js";import{u as ce}from"./use-loading-37c1118f.js";import{c as L,f as E,a as pe}from"./rule-00386333.js";import{_ as de}from"./FormItemGridItem-6e368cab.js";import{a as _e,b as me,_ as fe}from"./DataTable-895cc5c9.js";import{_ as ge}from"./Input-ffdad1fe.js";import{_ as ve}from"./InputNumber-abdefede.js";import{N as he}from"./Select-303f22e9.js";import{a as ye}from"./Grid-4bf13ce0.js";import{N as C}from"./Space-9d9d608e.js";import{V as be,_ as xe}from"./vuedraggable.umd-64e6f377.js";import{N as ke}from"./Checkbox-9ba985cc.js";import{N as we}from"./Popover-5b10a0f7.js";import{N as A}from"./Tag-f9ad861a.js";import{N as Ne}from"./Popconfirm-3cc80b7b.js";import"./format-length-c9d165c6.js";import"./get-c991346f.js";import"./use-merged-state-25180a9d.js";import"./Suffix-e9302ec1.js";import"./Dropdown-7051e15f.js";import"./Ellipsis-0f9030da.js";import"./create-ref-setter-f485918b.js";import"./PerformantEllipsis-328d4c5a.js";import"./next-frame-once-7035a838.js";import"./Pagination-a07528c5.js";import"./Forward-1c09c58f.js";import"./Add-fb180c3e.js";import"./use-compitable-51841f38.js";import"./cssr-b4c9f431.js";function $e(c){return c?c.map((p,r)=>({index:r+1,key:p.id,...p})):[]}const Se=async()=>{const c=await Q.post("/getAllUserList");return Y($e,c)},Ue={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Te=V("path",{fill:"currentColor",d:"M8.71 7.71L11 5.41V15a1 1 0 0 0 2 0V5.41l2.29 2.3a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42l-4-4a1 1 0 0 0-.33-.21a1 1 0 0 0-.76 0a1 1 0 0 0-.33.21l-4 4a1 1 0 1 0 1.42 1.42ZM21 14a1 1 0 0 0-1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-4a1 1 0 0 0-2 0v4a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-4a1 1 0 0 0-1-1Z"},null,-1),Ce=[Te];function Me(c,p){return k(),M("svg",Ue,Ce)}const ze={name:"uil-export",render:Me},Le={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ve=V("path",{fill:"currentColor",d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),De=[Ve];function Be(c,p){return k(),M("svg",Le,De)}const Fe={name:"ic-round-delete",render:Be},Re=O({name:"TableActionModal",__name:"table-action-modal",props:{visible:{type:Boolean},type:{default:"add"},editData:{default:null}},emits:["update:visible"],setup(c,{emit:p}){const r=c,f=P({get(){return r.visible},set(l){p("update:visible",l)}}),y=()=>{f.value=!1},h=P(()=>({add:"添加用户",edit:"编辑用户"})[r.type]),g=S(),o=I(d()),v={userName:L("请输入用户名"),age:L("请输入年龄"),gender:L("请选择性别"),phone:E.phone,email:E.email,userStatus:L("请选择用户状态")};function d(){return{userName:"",age:null,gender:null,phone:"",email:null,userStatus:null}}function w(l){Object.assign(o,l)}function N(){({add:()=>{const a=d();w(a)},edit:()=>{r.editData&&w(r.editData)}})[r.type]()}async function _(){var l,a;await((l=g.value)==null?void 0:l.validate()),(a=window.$message)==null||a.success("新增成功!"),y()}return Z(()=>r.visible,l=>{l&&N()}),(l,a)=>{const U=ge,b=de,$=ve,D=_e,t=me,i=he,T=ye,z=x,B=C,F=pe,R=te;return k(),H(R,{show:f.value,"onUpdate:show":a[6]||(a[6]=s=>f.value=s),preset:"card",title:h.value,class:"w-700px"},{default:n(()=>[e(F,{ref_key:"formRef",ref:g,"label-placement":"left","label-width":80,model:o,rules:v},{default:n(()=>[e(T,{cols:24,"x-gap":18},{default:n(()=>[e(b,{span:12,label:"用户名",path:"userName"},{default:n(()=>[e(U,{value:o.userName,"onUpdate:value":a[0]||(a[0]=s=>o.userName=s)},null,8,["value"])]),_:1}),e(b,{span:12,label:"年龄",path:"age"},{default:n(()=>[e($,{value:o.age,"onUpdate:value":a[1]||(a[1]=s=>o.age=s),clearable:""},null,8,["value"])]),_:1}),e(b,{span:12,label:"性别",path:"gender"},{default:n(()=>[e(t,{value:o.gender,"onUpdate:value":a[2]||(a[2]=s=>o.gender=s)},{default:n(()=>[(k(!0),M(X,null,G(u(W),s=>(k(),H(D,{key:s.value,value:s.value},{default:n(()=>[m(q(s.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(b,{span:12,label:"手机号",path:"phone"},{default:n(()=>[e(U,{value:o.phone,"onUpdate:value":a[3]||(a[3]=s=>o.phone=s)},null,8,["value"])]),_:1}),e(b,{span:12,label:"邮箱",path:"email"},{default:n(()=>[e(U,{value:o.email,"onUpdate:value":a[4]||(a[4]=s=>o.email=s)},null,8,["value"])]),_:1}),e(b,{span:12,label:"状态",path:"userStatus"},{default:n(()=>[e(i,{value:o.userStatus,"onUpdate:value":a[5]||(a[5]=s=>o.userStatus=s),options:u(ee)},null,8,["value","options"])]),_:1})]),_:1}),e(B,{class:"w-full pt-16px",size:24,justify:"end"},{default:n(()=>[e(z,{class:"w-72px",onClick:y},{default:n(()=>[m("取消")]),_:1}),e(z,{class:"w-72px",type:"primary",onClick:_},{default:n(()=>[m("确定")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),je={class:"w-180px"},He={key:0,class:"flex-y-center h-36px px-12px hover:bg-primary_active"},Oe=O({__name:"column-setting",props:{columns:{}},emits:["update:columns"],setup(c,{emit:p}){const r=c,f=S(y());function y(){return r.columns.map(h=>({...h,checked:!0}))}return Z(f,h=>{const o=h.filter(v=>v.checked).map(v=>{const d={...v};return delete d.checked,d});p("update:columns",o)},{deep:!0}),(h,g)=>{const o=J,v=x,d=xe,w=ke,N=we;return k(),H(N,{placement:"bottom",trigger:"click"},{trigger:n(()=>[e(v,{size:"small",type:"primary"},{default:n(()=>[e(o,{class:"mr-4px text-16px"}),m(" 表格列设置 ")]),_:1})]),default:n(()=>[V("div",je,[e(u(be),{modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=_=>f.value=_),"item-key":"key"},{item:n(({element:_})=>[_.key?(k(),M("div",He,[e(d,{class:"mr-8px text-20px cursor-move"}),e(w,{checked:_.checked,"onUpdate:checked":l=>_.checked=l},{default:n(()=>[m(q(_.title),1)]),_:2},1032,["checked","onUpdate:checked"])])):ne("",!0)]),_:1},8,["modelValue"])])]),_:1})}}}),Pe={class:"overflow-hidden"},Ee={class:"flex-col h-full"},bt=O({__name:"index",setup(c){const{loading:p,startLoading:r,endLoading:f}=ce(!1),{bool:y,setTrue:h}=ae(),g=S([]);function o(t){g.value=t}async function v(){r();const{data:t}=await Se();t&&setTimeout(()=>{o(t),f()},1e3)}const d=S([{type:"selection",align:"center"},{key:"index",title:"序号",align:"center"},{key:"userName",title:"用户名",align:"center"},{key:"age",title:"用户年龄",align:"center"},{key:"gender",title:"性别",align:"center",render:t=>t.gender?e(A,{type:{0:"success",1:"warning"}[t.gender]},{default:()=>[oe[t.gender]]}):e("span",null,null)},{key:"phone",title:"手机号码",align:"center"},{key:"email",title:"邮箱",align:"center"},{key:"userStatus",title:"状态",align:"center",render:t=>t.userStatus?e(A,{type:{1:"success",2:"error",3:"warning",4:"default"}[t.userStatus]},{default:()=>[se[t.userStatus]]}):e("span",null,null)},{key:"actions",title:"操作",align:"center",render:t=>e(C,{justify:"center"},{default:()=>[e(x,{size:"small",onClick:()=>U(t.id)},{default:()=>[m("编辑")]}),e(Ne,{onPositiveClick:()=>b(t.id)},{default:()=>"确认删除",trigger:()=>e(x,{size:"small"},{default:()=>[m("删除")]})})]})}]),w=S("add");function N(t){w.value=t}const _=S(null);function l(t){_.value=t}function a(){h(),N("add")}function U(t){const i=g.value.find(T=>T.id===t);i&&l(i),N("edit"),h()}function b(t){var i;(i=window.$message)==null||i.info(`点击了删除，rowId为${t}`)}const $=I({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20,25,30],onChange:t=>{$.page=t},onUpdatePageSize:t=>{$.pageSize=t,$.page=1}});function D(){v()}return D(),(t,i)=>{const T=re,z=Fe,B=ze,F=K,R=fe,s=ue;return k(),M("div",Pe,[e(s,{title:"用户管理",bordered:!1,class:"h-full rounded-8px shadow-sm"},{default:n(()=>[V("div",Ee,[e(u(C),{class:"pb-12px",justify:"space-between"},{default:n(()=>[e(u(C),null,{default:n(()=>[e(u(x),{type:"primary",onClick:a},{default:n(()=>[e(T,{class:"mr-4px text-20px"}),m(" 新增 ")]),_:1}),e(u(x),{type:"error"},{default:n(()=>[e(z,{class:"mr-4px text-20px"}),m(" 删除 ")]),_:1}),e(u(x),{type:"success"},{default:n(()=>[e(B,{class:"mr-4px text-20px"}),m(" 导出Excel ")]),_:1})]),_:1}),e(u(C),{align:"center",size:18},{default:n(()=>[e(u(x),{size:"small",type:"primary",onClick:v},{default:n(()=>[e(F,{class:le(["mr-4px text-16px",{"animate-spin":u(p)}])},null,8,["class"]),m(" 刷新表格 ")]),_:1}),e(Oe,{columns:d.value,"onUpdate:columns":i[0]||(i[0]=j=>d.value=j)},null,8,["columns"])]),_:1})]),_:1}),e(R,{columns:d.value,data:g.value,loading:u(p),pagination:$,"flex-height":"",class:"flex-1-hidden"},null,8,["columns","data","loading","pagination"]),e(Re,{visible:u(y),"onUpdate:visible":i[1]||(i[1]=j=>ie(y)?y.value=j:null),type:w.value,"edit-data":_.value},null,8,["visible","type","edit-data"])])]),_:1})])}}});export{bt as default};
